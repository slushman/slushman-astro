<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Using WordPress Plugin Boilerplate</title>

    <link href="https://inspirejs.org/inspire.css" rel="stylesheet" />
    <link href="/presentations/theme.css" rel="stylesheet" />
    <link rel="canonical" href="https://www.slushman.com/presentations/using-wp-plugin-boilerplate" />
    <meta name="description" content="WordPress Plugin Boilerplate is a powerful tool for developing WordPress plugins. Learn how to use this boilerplate code effectively and efficiently!" />
  </head>
  <body class="language-markup" data-prism-plugins="normalize-whitespace">

    <header id="intro" class="slide">
      <h1>Using WordPress Plugin Boilerplate</h1>
      <h2>Chris Wilcoxson</h2>
      <p>WordCamp Dayton 2015</p>
    </header>

    <section>
      <article class="slide">
        <h1>slushman</h1>

        <details>
          <p>Started using WordPress in 2007 with WordPress.com.</p>
          <p>Self-hosted WordPress in 2008 and wrote an eBook to help musicians build their own sites.</p>
          <p>Started developing for WordPress in 2011.</p>
          <p>Published 3 plugins: ArtistDataPress, BuddyPress Profile Widgets, and BuddyBar</p>
        </details>
      </article>

      <article class="slide">
        <h1>DCC Marketing</h1>

        <ul class="delayed-children">
          <li>Decatur, IL</li>
          <li>dccmarketing.com</li>
        </ul>

        <details>
          <p>6 months ago, my family and I moved to my wife's family farm near Decatur, IL</p>
          <p>Lead developer</p>
          <p>Full-service, boutique marketing agency</p>
          <p>Based in Decatur, IL with an office in Chicago</p>
        </details>
      </article>

      <article class="slide">
        <img src="/presentations/using-wp-plugin-boilerplate/Halloween-2014.jpg" />
      </article>

      <article class="slide">
        <img src="/presentations/using-wp-plugin-boilerplate/jump.gif" />
      </article>

      <article class="slide">
        <h1>WordPress Plugin Boilerplate</h1>
        <ul>
          <li>Tom McFarlin</li>
          <li>Devin Vinson</li>
        </ul>
        <details>
          <p>Brief history</p>
          <p>Written by Tom McFarlin of Atlanta, GA in 2011</p>
          <p>As of March 4, 2015, taken over by Devin Vinson of Tampa Bay, FL</p>
        </details>
      </article>

      <article class="slide">
        <h1>Why Use It?</h1>

        <ul class="delayed-children">
          <li>Keeps files organized</li>
          <li>WordPress Coding Standards</li>
          <li>WordPress Documentation Standards</li>
          <li>WordPress APIs</li>
          <li>Translatable</li>
        </ul>

        <details>
          <p>Like building a house, start with a good foundation:</p>
          <p>Organization helps with maintainability</p>
          <p>WP Coding standards</p>
          <p>WP documentation standards</p>
          <p>Uses WP APIs</p>
          <p>Starts with a blank .pot to encourage developers to add internationalization to their plugins</p>
        </details>
      </article>

      <article class="slide">
        <h1>What's New?</h1>

        <ul class="delayed-children">
          <li>Completely rewritten</li>
          <li>No more singleton</li>
          <li>New Structure</li>
          <li>https://wppb.io</li>
        </ul>

        <details>
          <p>The entire project was rewritten from scratch using feedback and contributions fro several other developers</p>
          <p>In this rewrite, Tom moved away from using the singleton pattern, which is hotly debated practice among developers</p>
          <p>The plugin features a new structure (which we'll go over in more detail)</p>
          <p>And the biggest new feature is wppb.io, which serves as the homepage for the project and will house all the documentation coming soon</p>
        </details>
      </article>

      <article class="slide">
        <h1>Structure</h1>

        <img src="/presentations/using-wp-plugin-boilerplate/structure.png" />

        <details>
          <p>Comes ready for WP plugin directory with Markdown docs for README and ChangeLog at the root</p>
          <p>The assets folder with an example icon, screenshot, and banner image files for the plugin directory.</p>
          <p>Inside the trunk folder...</p>
        </details>
      </article>

      <article class="slide">
        <h1>Admin & Public</h1>
        <p>
          <img src="/presentations/using-wp-plugin-boilerplate/admin.png" />
        </p>
        <p>
          <img src="/presentations/using-wp-plugin-boilerplate/public.png" />
        </p>
        <details>
          <p>Both the admin and public classes have identical structures.</p>
          <p>Each has a CSS folder for the related styled</p>
          <p>A Javascript folder for any scripts</p>
          <p>and a Partials folder for HTML views</p>
          <p>The main file in each folder contains all the code needed for that section. We'll go into details of each later.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Includes</h1>

        <img src="/presentations/using-wp-plugin-boilerplate/includes.png" />

        <details>
          <p>Holds all the operational files. This is where the magic happens.</p>
          <p>But seriously, thee are the core of your future plugin.</p>
          <p>Before we got into all the bits and pieces, let me give you some advice:</p>
        </details>
      </article>

      <article class="slide">
        <h1>Use a Generator</h1>

        <p>https://wppb.me</p>

        <details>
          <p>Seriously, save yourself a ton of time by using this generator. It takes care of renaming everything for you and prevents alot of troubleshooting from typos.></p>
        </details>
      </article>

      <article class="slide">
        <h1>plugin-name.php</h1>
        <pre class="language-php">
          <code class="language-php">
            /**
             * @link              https://example.com
             * @since             1.0.0
             * @package           Plugin_Name
             *
             * @wordpress-plugin
             * Plugin Name:       WordPress Plugin Boilerplate
             * Plugin URI:        https://example.com/plugin-name-uri/
             * Description:       This is a short description of what the plugin does.
             * Version:           1.0.0
             * Author:            Your Name or Your Company
             * Author URI:        https://example.com/
             * License:           GPL-2.0+
             * License URI:       https://www.gnu.org/licenses/gpl-2.0.txt
             * Text Domain:       plugin-name
             * Domain Path:       /languages
             */
          </code>
        </pre>

        <details>
          <p>Like any WordPress plugin, it starts with comments describing what it does, who authored it, the current version, etc.</p>
          <p>Boilerplate also uses the PHPDoc versions of those same properties.</p>
        </details>
      </article>

      <article class="slide">
        <h1>plugin-name.php</h1>
        <pre class="language-php">
          <code class="language-php">
            if (!defined( &#x27;WPINC&#x27;)) { die; }

            function activate_plugin_name() {
              require_once plugin_dir_path( __FILE__ ) . &#x27;includes/class-plugin-name-activator.php&#x27;;
              Plugin_Name_Activator::activate();
            }
            
            function deactivate_plugin_name() {
              require_once plugin_dir_path(__FILE__) . &#x27;includes/class-plugin-name-deactivator.php&#x27;;
              Plugin_Name_Deactivator::deactivate();
            }
            
            register_activation_hook(__FILE__, &#x27;activate_plugin_name&#x27;);
            register_deactivation_hook(__FILE__, &#x27;deactivate_plugin_name&#x27;);
          </code>
        </pre>

        <details>
          <p>register_activation & register_deactivation</p>
          <p>Both classes are blank</p>
        </details>
      </article>

      <article class="slide">
        <h1>plugin-name.php</h1>
        <pre class="language-php">
          <code class="language-php">
            require plugin_dir_path(__FILE__) . &#x27;includes/class-plugin-name.php&#x27;;

            function run_plugin_name() {
              $plugin = new Plugin_Name();
              $plugin-&#x3E;run();
            }
            run_plugin_name();
          </code>
        </pre>

        <details>
          <p>At the bottom of this file, We load up the primary plugin class and call the run method.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>

        <a href="https://github.com/DevinVinson/WordPress-Plugin-Boilerplate/tree/master/plugin-name">See Full Code</a>

        <details>
          <p>The plugin class is the core of the plugin. Here's where everything ties together. Let's take a look.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>Constructor</h2>
        <pre class="language-php">
          <code class="language-php">
            public function __construct() {
              $this-&#x3E;plugin_name = &#x27;plugin-name&#x27;;
              $this-&#x3E;version = &#x27;1.0.0&#x27;;
          
              $this-&#x3E;load_dependencies();
              $this-&#x3E;set_locale();
              $this-&#x3E;define_admin_hooks();
              $this-&#x3E;define_public_hooks();
            }
          </code>
        </pre>

        <details>
          <p>The constructors sets the class variables, the plugin_name is used for i18n, the version is used for cache busting scripts and stylesheets.</p>
          <p>Then calls these four methods:</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>Load Dependencies</h2>
        <pre class="language-php">
          <code class="language-php">
            private function load_dependencies() {
              require_once plugin_dir_path(dirname(__FILE__)) . &#x27;includes/class-plugin-name-loader.php&#x27;;
              require_once plugin_dir_path(dirname(__FILE__)) . &#x27;includes/class-plugin-name-i18n.php&#x27;;
              require_once plugin_dir_path(dirname(__FILE__)) . &#x27;admin/class-plugin-name-admin.php&#x27;;
              require_once plugin_dir_path(dirname(__FILE__)) . &#x27;public/class-plugin-name-public.php&#x27;;
            
              $this-&#x3E;loader = new Plugin_Name_Loader();
            }
          </code>
        </pre>

        <details>
          <p>Load dependencies brings in all the other classes used by the plugin class. It also instantiates the Loader class.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>i18n</h2>
        <pre class="language-php">
          <code class="language-php">
            private function set_locale() {
              $plugin_i18n = new Plugin_Name_i18n();
              $plugin_i18n-&#x3E;set_domain($this-&#x3E;get_plugin_name());
            
              $this-&#x3E;loader-&#x3E;add_action(&#x27;plugins_loaded&#x27;, $plugin_i18n, &#x27;load_plugin_textdomain&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>The set_locale method uses the WordPress APIs to set the textdomain for the plugin for i18n.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>Hooks</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_admin_hooks() {
              $plugin_admin = new Plugin_Name_Admin(
                $this-&#x3E;get_plugin_name(), $this-&#x3E;get_version()
              );
            
              $this-&#x3E;loader-&#x3E;add_action(
                &#x27;admin_enqueue_scripts&#x27;, $plugin_admin, &#x27;enqueue_styles&#x27;
              );
            
              $this-&#x3E;loader-&#x3E;add_action(
                &#x27;admin_enqueue_scripts&#x27;, $plugin_admin, &#x27;enqueue_scripts&#x27;
              );
            }
          </code>
        </pre>

        <details>
          <p>There are two methods where the WordPress hooks and filters are setup. This is the admin hooks method, the public-facing method is exactly the same, just referencing different hooks.</p>
          <p>This is one of the more interesting parts of the 3.0 rewrite. It instantiates the Admin class, then you can see it calls the add_action method with the loader class.</p>
          <p>The add_action method is really just a wrapper for a standard add_action like anywhere else in WordPress. Basically, its gathering all those calls and running them all at once. This is part of keeping your plugin organized and providing a stable, consistant structure.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Loader Class</h1>
        <h2>Constructor</h2>
        <pre class="language-php">
          <code class="language-php">
            public function __construct() {
              $this-&#x3E;actions = array();
              $this-&#x3E;filters = array();
            }
          </code>
        </pre>

        <details>
          <p>The constructor sets the actions and filters class variables as blank arrays.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Loader Class</h1>
        <h2>Add Action</h2>
        <pre class="language-php">
          <code class="language-php">
            public function add_action($hook, $component, $callback, $priority = 10, $accepted_args = 1) {
              $this-&#x3E;actions = $this-&#x3E;add(
                $this-&#x3E;actions,
                $hook,
                $component,
                $callback,
                $priority,
                $accepted_args
              );
            }
          </code>
        </pre>

        <details>
          <p>They work the same way: they take the arguments from your call in the plugin class and load each one into their respective arrays.</p>
          <p>They use a helper method call "Add", which simply adds a new subarray to either the actions array.</p>
          <p>There's also an add_filter method, which appears exactly the same way.</p>
          <p>Those are processed in the run method.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Loader Class</h1>
        <h2>Run Method</h2>
        <pre class="language-php">
          <code class="language-php">
            public function run() {
              foreach ($this-&#x3E;actions as $hook) {
                add_action(
                  $hook[&#x27;hook&#x27;],
                  array($hook[&#x27;component&#x27;], $hook[&#x27;callback&#x27;]),
                  $hook[&#x27;priority&#x27;],
                  $hook[&#x27;accepted_args&#x27;]
                );
              }
            }
          </code>
        </pre>

        <details>
          <p>These are simple foreach loops where each subarray uses the standard add_action WordPress function to setup all the various bits and piece of your plugin.</p>
          <p>There's also a loop for adding filters, I ran out of room on the slide, but it works exactly the same way.</p>
          <p>That's the loader class.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Admin & Public Classes</h1>
        <h2>Constructor</h2>
        <pre class="language-php">
          <code class="language-php">
            public function __construct($plugin_name, $version) {
              $this-&#x3E;plugin_name = $plugin_name;
              $this-&#x3E;version = $version;
            }
          </code>
        </pre>
        <ul>
          <li>
            <a href="https://github.com/DevinVinson/WordPress-Plugin-Boilerplate/blob/master/plugin-name/trunk/admin/class-plugin-name-admin.php">See Full Code - Admin</a>
          </li>
          <li>
            <a href="https://github.com/DevinVinson/WordPress-Plugin-Boilerplate/blob/master/plugin-name/trunk/public/class-plugin-name-public.php">See Full Code - Public</a>
          </li>
        </ul>

        <details>
          <p>The admin and public classes are structured the same and have the same methods, but keep the pulic-facing code and admin-facing code separated.</p>
          <p>The constructor just sets the i18n and version class variables.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Admin & Public Classes</h1>
        <h2>Enqueue Styles</h2>
        <pre class="language-php">
          <code class="language-php">
            public function enqueue_styles() {
              wp_enqueue_style(
                $this-&#x3E;plugin_name,
                plugin_dir_url(__FILE__) . &#x27;css/plugin-name-admin.css&#x27;,
                array(),
                $this-&#x3E;version,
                &#x27;all&#x27;
              );
            }
          </code>
        </pre>

        <details>
          <p>Then they have added two example methods within each class.</p>
          <p>The first is enqueue_styles, which enqueues the sample CSS file.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Admin & Public Classes</h1>
        <h2>Enqueue Scripts</h2>
        <pre class="language-php">
          <code class="language-php">
            public function enqueue_scripts() {
              wp_enqueue_script(
                $this-&#x3E;plugin_name,
                plugin_dir_url(__FILE__) . &#x27;js/plugin-name-admin.js&#x27;,
                array( &#x27;jquery&#x27; ),
                $this-&#x3E;version,
                false
              );
            }
          </code>
        </pre>

        <details>
        <p>Enqueue scripts works the same basic way, calling the WordPress function to enqueue a script using the sample script file included with the boilerplate.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Other Files</h1>

        <img src="/presentations/using-wp-plugin-boilerplate/languages.png" />
        <ul class="delayed-children">
          <li>index.php files</li>
          <li>Languages Folder & blank .pot file</li>
          <li>license.txt</li>
          <li>README.txt</li>
          <li>uninstall.php</li>
        </ul>

        <details>
          <p>index.php files - security measure</p>
          <p>languages folder & blank pot file</p>
          <p>license.txt - copy of GPL2 license</p>
          <p>readme - text for the plugin directory</p>
          <p>uninstall.php - blank</p>
        </details>
      </article>

      <article class="slide">
        <img src="/presentations/using-wp-plugin-boilerplate/nowwhat.gif" />
      </article>

      <article class="slide">
        <h1>Examples</h1>
        <ul class="delayed-children">
          <li>Enqueue styles and scripts</li>
          <li>Custom Post Type</li>
          <li>Taxonomy</li>
          <li>Plugin Settings</li>
          <li>Metaboxes</li>
          <li>Shortcode</li>
          <li>Displays/Views</li>
          <li>Widgets</li>
        </ul>

        <details>
          <p>I wrote up an example plugin to show how this stuff works in practice. While explaining it might help you, seeing working code helps more.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Custom Post Type</h1>
        <h2>Plugin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_admin_hooks() {
              $plugin_admin = new Now_Hiring_Admin(
                $this-&#x3E;get_i18n(),
                $this-&#x3E;get_version()
              );
            
              $this-&#x3E;loader-&#x3E;add_action(&#x27;init&#x27;, $plugin_admin, &#x27;new_cpt_jobs&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>In the admin hooks method in the plugin class, we hook the new_cpt_jobs method onto init.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Custom Post Type</h1>
        <h2>Admin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            public function new_cpt_jobs() {
              $cap_type = &#x27;post&#x27;;
              $plural = &#x27;Jobs&#x27;;
              $single = &#x27;Job&#x27;;
            
              $opts[&#x27;show_ui&#x27;] = TRUE;
              $opts[&#x27;supports&#x27;] = array(&#x27;title&#x27;, &#x27;editor&#x27;, &#x27;thumbnail&#x27;);
              $opts[&#x27;capabilities&#x27;][&#x27;edit_post&#x27;] = &#x22;edit_{$cap_type}&#x22;;
              $opts[&#x27;labels&#x27;][&#x27;add_new&#x27;] =
                  __(&#x22;Add New {$single}&#x22;, $this-&#x3E;i18n);
              ...
            
              register_post_type(strtolower($plural), $opts);
            }
          </code>
        </pre>

        <details>
          <p>Then in the admin class, the new_cpt_jobs method registers the custom post type. I can't fit the entire array on the slide, but you can see part of it there before the register_post_type call.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Taxonomy</h1>
        <h2>Plugin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_admin_hooks() {
              $plugin_admin = new Now_Hiring_Admin(
                $this-&#x3E;get_i18n(),
                $this-&#x3E;get_version()
              );
            
              $this-&#x3E;loader-&#x3E;add_action(&#x27;init&#x27;, $plugin_admin, &#x27;new_tax_type&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>Taxonomies work the same basic way as a custom post type. We hook the new_taxonomy_type method from the admin class on init.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Taxonomy</h1>
        <h2>Admin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            public function new_taxonomy_type() {
              $plural = &#x27;Types&#x27;;
              $single = &#x27;Type&#x27;;
              $tax_name = &#x27;job_type&#x27;;
            
              $opts[&#x27;query_var&#x27;] = $tax_name;
              $opts[&#x27;capabilities&#x27;][&#x27;assign_terms&#x27;] = &#x27;edit_posts&#x27;;
              $opts[&#x27;labels&#x27;][&#x27;add_new_item&#x27;] =
                  __(&#x22;Add New {$single}&#x22;, $this-&#x3E;i18n);
              ...
            
              register_taxonomy($tax_name, &#x27;jobs&#x27;, $opts);
            }
          </code>
        </pre>

        <details>
          <p>Then in the new_taxonomy_type method, we register the taxonomy. Again, I'm not showing the entire options array, just a snippet.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Plugin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_admin_hooks() {
              $plugin_admin = new Now_Hiring_Admin(
                $this-&#x3E;get_i18n(),
                $this-&#x3E;get_version()
              );
            
              $this-&#x3E;loader-&#x3E;add_action(&#x27;admin_menu&#x27;, $plugin_admin, &#x27;add_menu&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;admin_init&#x27;, $plugin_admin, &#x27;register_settings&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>In the admin class, we hook the register_settings method to admin_init and the add_menu method to admin_menu.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Admin Class - Register Settings</h2>
        <pre class="language-php">
          <code class="language-php">
            public function register_settings() {
              register_setting(&#x27;now_hiring_options&#x27;, &#x27;now_hiring_options&#x27;,
                  array($this, &#x27;validate_options&#x27;));
            
              add_settings_section(&#x27;now_hiring_display_options&#x27;,
                  &#x27;Display Options&#x27;,
                  array($this, &#x27;display_options_section&#x27;), &#x27;now-hiring&#x27;);
            
              add_settings_field(&#x27;display_salary&#x27;, &#x27;Display Salary&#x27;,
                  array($this, &#x27;display_options_field&#x27;),
                  &#x27;now-hiring&#x27;, &#x27;now_hiring_display_options&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>You can see, I've registered the setting "now_hiring_options", added a display options section, and added one field called display_salary.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Admin Class - Options Page</h2>
        <pre class="language-php">
          <code class="language-php">
            public function options_page() {
              echo &#x27;&#x3C;h2&#x3E;Now Hiring Settings&#x27;;
              echo &#x27;&#x3C;form method=&#x22;post&#x22; action=&#x22;options.php&#x22;&#x3E;&#x27;;
              settings_fields(&#x27;now_hiring_options&#x27;);
              do_settings_sections(&#x27;now-hiring&#x27;);
              submit_button(&#x27;Save Settings&#x27;);
              echo &#x27;&#x3C;/form&#x3E;&#x27;;
            }
          </code>
        </pre>

        <details>
          <p>Typical options page stuff here.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Admin Class - Add Menu</h2>
        <pre class="language-php">
          <code class="language-php">
            public function add_menu() {
              add_options_page(
                __(&#x27;Now Hiring Settings&#x27;, $this-&#x3E;i18n),
                __(&#x27;Now Hiring&#x27;, $this-&#x3E;i18n),
                &#x27;manage_options&#x27;,
                &#x27;now-hiring&#x27;,
                array($this, &#x27;options_page&#x27;)
              );
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Admin Class - Display Section</h2>
        <pre class="language-php">
          <code class="language-php">
            public function display_options_section($params) {
              echo &#x27;&#x3C;p&#x3E;&#x27; . $params[&#x27;title&#x27;] . &#x27;&#x3C;/p&#x3E;&#x27;;
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Admin Class - Display Field</h2>
        <pre class="language-php">
          <code class="language-php">
            public function display_options_field() {
              $options = get_option(&#x27;now_hiring_options&#x27;);
            
              ?&#x3E;&#x3C;input 
                type=&#x22;checkbox&#x22; 
                id=&#x22;now_hiring_options[display_salary]&#x22; 
                name=&#x22;now_hiring_options[display_salary]&#x22; 
                value=&#x22;1&#x22; &#x3C;?php checked(1, $options[&#x27;display_salary&#x27;], false); ?&#x3E;
              /&#x3E;&#x3C;?php
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Plugin Settings</h1>
        <h2>Admin Class - Validate Options</h2>
        <pre class="language-php">
          <code class="language-php">
            public function validate_options($input) {
              $display_salary = trim($input[&#x27;display_salary&#x27;]);
              $valid[&#x27;display_salary&#x27;] = isset($display_salary) ? 1 : 0;
            
              if ($valid[&#x27;display_salary&#x27;] != $input[&#x27;display_salary&#x27;]) {
                add_settings_error(
                  &#x27;display_salary&#x27;,
                  &#x27;display_salary_error&#x27;,
                  &#x27;Display salary error.&#x27;,
                  &#x27;error&#x27;
                );
              }
            
              return $valid;
            } // validate_options()
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Settings & Row Links</h1>

        <img src="/presentations/using-wp-plugin-boilerplate/links.png" />
      </article>

      <article class="slide">
        <h1>Settings & Row Links</h1>
        <h2>Plugin File</h2>
        <pre class="language-php">
          <code class="language-php">
            if (!defined(&#x27;NOW_HIRING_BASENAME&#x27;)) {
              define(&#x27;NOW_HIRING_BASENAME&#x27;, plugin_basename(__FILE__));
            }
          </code>
        </pre>

        <details>
          <p>One of the little things I like including in my plugins are settings link and row links.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Settings & Row Links</h1>
        <h2>Plugin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_admin_hooks() {
              $plugin_admin = new Now_Hiring_Admin($this-&#x3E;get_i18n(), $this-&#x3E;get_version());
            
              $this-&#x3E;loader-&#x3E;add_action(
                &#x27;plugin_action_links_&#x27; . NOW_HIRING_BASENAME,
                $plugin_admin,
                &#x27;settings_link&#x27;
              );
              $this-&#x3E;loader-&#x3E;add_action(
                &#x27;plugin_row_meta&#x27;,
                $plugin_admin,
                &#x27;row_links&#x27;, 10, 2
              );
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Settings & Row Links</h1>
        <h2>Admin Class - Settings Link</h2>
        <pre class="language-php">
          <code class="language-php">
            public function settings_link($links) {
              $settings_link = sprintf(
                &#x27;&#x3C;a href=&#x22;%s&#x22;&#x3E;%s&#x3C;/a&#x3E;&#x27;,
                admin_url(&#x27;options-general.php?page=now-hiring&#x27;),
                __(&#x27;Settings&#x27;)
              );
            
              array_unshift($links, $settings_link);
            
              return $links;
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Settings & Row Links</h1>
        <h2>Admin Class - Row Link</h2>
        <pre class="language-php">
          <code class="language-php">
            public function row_links($links, $file) {
              if ($file == NOW_HIRING_BASENAME) {
                $link = &#x27;&#x3C;a href=&#x22;https://grumpycats.com/&#x22;&#x3E;Grumpy Cat&#x3C;/a&#x3E;&#x27;;
                array_push($links, $link);
              }
            
              return $links;
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Metaboxes</h1>
        <h2>Plugin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_admin_hooks() {
              $plugin_admin = new Now_Hiring_Admin($this-&#x3E;get_i18n(), $this-&#x3E;get_version());
              $this-&#x3E;loader-&#x3E;add_action(&#x27;add_meta_boxes&#x27;, $plugin_admin, &#x27;add_metaboxes&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;save_post_jobs&#x27;, $plugin_admin, &#x27;save_meta&#x27;, 10, 2);
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Metaboxes</h1>
        <h2>Admin Class - Add Metaboxes</h2>
        <pre class="language-php">
          <code class="language-php">
            public function add_metaboxes() {
              add_meta_box(
                &#x27;now_hiring_job_location&#x27;,
                __(&#x27;Job Location&#x27;, $this-&#x3E;i18n),
                array($this, &#x27;callback_metabox_job_location&#x27;),
                &#x27;jobs&#x27;,
                &#x27;normal&#x27;,
                &#x27;default&#x27;
              );
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Metaboxes</h1>
        <h2>Admin Class - Metabox Method</h2>
        <pre class="language-php">
          <code class="language-php">
            public function callback_metabox_job_location($object, $box) {
              include( 
                plugin_dir_path(__FILE__) . &#x27;partials/now-hiring-admin-display-metabox-job-location.php&#x27;
              );
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Metaboxes</h1>
        <h2>Admin Class - Save Meta</h2>
        <pre class="language-php">
          <code class="language-php">
            public function save_meta($post_id, $object) {
              // check for autosave, post type, capability, &#x26; set nonce
              if (!wp_verify_nonce( $_POST[&#x27;job_location_nonce&#x27;], NOW_HIRING_BASENAME)) { 
                return $post_id;
              }
            
              $custom = get_post_custom($post_id);
              $metas = array(&#x27;job-location&#x27;);
            
              foreach ($metas as $meta) {
                // sanitize data
                // update meta
              }
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Shortcode</h1>
        <h2>Plugin Class</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_public_hooks() {
              $plugin_public = new Now_Hiring_Public(
                $this-&#x3E;get_i18n(),
                $this-&#x3E;get_version()
              );
            
              $this-&#x3E;loader-&#x3E;add_action(
                &#x27;init&#x27;,
                $plugin_public,
                &#x27;register_shortcodes&#x27;
              );
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Shortcode</h1>
        <h2>Public Class - Register Shortcodes</h2>
        <pre class="language-php">
          <code class="language-php">
            public function register_shortcodes() {
              add_shortcode( &#x27;nowhiring&#x27;, array( $this, &#x27;shortcode&#x27; ) );
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Shortcode</h1>
        <h2>Public Class - Shortcode Method</h2>
        <pre class="language-php">
          <code class="language-php">
            public function shortcode($atts) {
              ob_start();
            
              $defaults[&#x27;order&#x27;] = &#x27;date&#x27;;
              $defaults[&#x27;quantity&#x27;] = -1;
              $args = shortcode_atts($defaults, $atts, &#x27;nowhiring&#x27;);
              $items = $this-&#x3E;get_job_posts($args);
            
              ...
            
              $output = ob_get_contents();
            
              ob_end_clean();
            
              return $output;
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Displays, Partials, Views, Oh My!</h1>
        <h2>Shortcode Method</h2>
        <pre class="language-php">
          <code class="language-php">
            if (is_array($items) || is_object($items)) {
              include(plugin_dir_path(__FILE__) . &#x27;partials/now-hiring-public-display.php&#x27;);
            }
          </code>
        </pre>
      </article>

      <article class="slide">
        <h1>Displays, Partials, Views, Oh My!</h1>
        <h2>Public Class - Display Loop</h2>
        <pre class="language-php">
          <code class="language-php">
            foreach ($items-&#x3E;posts as $item) {
              include(plugin_dir_path(__FILE__) . &#x27;now-hiring-public-display-single.php&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>I set these up in separate files so I can use a plugin option to switch out the display, so I keep each display's code separated.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Displays, Partials, Views, Oh My!</h1>
        <h2>Public Class - Display Loop</h2>
        <pre class="language-php">
          <code class="language-php">
            $plugin_path = plugin_dir_path(__FILE__);
            $layout = esc_attr($options[&#x27;layout&#x27;]);
            
            foreach ($items-&#x3E;posts as $item) {
              include( 
                $plugin_path . &#x27;now-hiring-public-display-single-&#x27; . $layout . &#x27;.php&#x27; 
              );
            }
          </code>
        </pre>

        <details>
          <p>The separated files allow for the possibility of using a plugin option to determine which single display gets shown on the front-end.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Displays, Partials, Views, Oh My!</h1>
        <h2>Public Class - Display Single</h2>
        <pre class="language-php">
          <code class="language-php">
            ?&#x3E;&#x3C;div class=&#x22;job-wrap&#x22;&#x3E;
              &#x3C;h1 class=&#x22;job-title&#x22;&#x3E;
                &#x3C;a href=&#x22;&#x3C;?php echo get_permalink($item-&#x3E;ID); ?&#x3E;&#x22;&#x3E;&#x3C;?php 
                  echo esc_attr($item-&#x3E;post_title);
                ?&#x3E;&#x3C;/a&#x3E;
                &#x3C;/h1&#x3E;
                &#x3C;div class=&#x22;job-content&#x22;&#x3E;&#x3C;?php echo $item-&#x3E;post_content; ?&#x3E;&#x3C;/h1&#x3E;
            &#x3C;/div&#x3E;
          </code>
        </pre>

        <details>
          <p>This is the display I've created for the example. I could see having a plugin option for choosing a different single job posting display. In that case, I'd put the option logic in the loop display file, which would then load one of the single displays based on the plugin option.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Widgets</h1>
        <h2>Where?</h2>

        <details>
          <p>I found two ways of incorporating a widget into the plugin.</p>
          <p>Both options use these two methods, just in different places.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>Load Dependencies</h2>
        <pre class="language-php">
          <code class="language-php">
            private function load_dependencies() {
              ...
              require_once plugin_dir_path(dirname(__FILE__)) . &#x27;includes/class-now-hiring-widget.php&#x27;;
            }
          </code>
        </pre>

        <details>
          <p>In the plugin class, add your widget class file in the load_dependencies method.</p>
          <p>If you have more than one widget, load each file as a dependency here.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Init Widgets</h1>
        <pre class="language-php">
          <code class="language-php">
            public function widgets_init() {
              register_widget(&#x27;now_hiring_widget&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>Next is the widget registration method, which I do similarly to register metaboxes where I do them all at once.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Flush Widget Cache</h1>
        <pre class="language-php">
          <code class="language-php">
            public function flush_widget_cache($post_id) {
              if (wp_is_post_revision($post_id)) { return; }
              $post = get_post($post_id);
              if ($post-&#x3E;post_type == &#x27;jobs&#x27;) {
                  wp_cache_delete($this-&#x3E;i18n, &#x27;widget&#x27;);
              }
            }
          </code>
        </pre>

        <details>
          <p>Lastly, based on the Tom McFarlin's widget boilerplate, I also include a flush_widget_cache, which is triggered when changes within WordPress affect the output of a widget.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Method One</h1>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>Constructor</h2>
        <pre class="language-php">
          <code class="language-php">
            public function __construct($plugin_name, $version) {
              ...
              $this-&#x3E;define_widget_hooks();
            }
          </code>
        </pre>

        <details>
          <p>Option 1 is putting all the widget methods in the plugin class. To kick it off, add a method call in the contructor, I called mine define_widget_hooks.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Plugin Class</h1>
        <h2>Define Widget Hooks</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_widget_hooks() {
              $this-&#x3E;loader-&#x3E;add_action(&#x27;widgets_init&#x27;, $this, &#x27;widgets_init&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;save_post_jobs&#x27;, $this, &#x27;flush_widget_cache&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;deleted_post&#x27;, $this, &#x27;flush_widget_cache&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;switch_theme&#x27;, $this, &#x27;flush_widget_cache&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>Option 1 is putting all the widget methods in the plugin class. To kick it off, add a method call in the contructor, I called mine define_widget_hooks. You can see, we hook the widgets_init method so the widgets will be recognized by WordPress and we flush the widget cache when posts are saved, which would end up changing the output of our widget.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Method Two</h1>
      </article>

      <article class="slide">
        <h1>Shared Class</h1>
        <h2>Constructor</h2>
        <pre class="language-php">
          <code class="language-php">
            public function __construct($plugin_name, $version) {
              ...
              $this-&#x3E;define_shared_hooks();
            }
          </code>
        </pre>

        <details>
          <p>The second option is to create a shared class, where the widgets_init, flush_widget_cache methods are located. In the constructor, we declare a different hooks method.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Shared Class</h1>
        <h2>Load Dependencies</h2>
        <pre class="language-php">
          <code class="language-php">
            private function load_dependencies() {
              ...
              require_once plugin_dir_path(dirname(__FILE__)) . &#x27;includes/class-now-hiring-shared.php&#x27;;
            }
          </code>
        </pre>

        <details>
          <p>Since we're creating a new class, we'll need to load its file as a dependency.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Shared Class</h1>
        <h2>Define Widget Hooks</h2>
        <pre class="language-php">
          <code class="language-php">
            private function define_shared_hooks() {
              $plugin_shared = new Now_Hiring_Shared($this-&#x3E;get_i18n(), $this-&#x3E;get_version());
            
              $this-&#x3E;loader-&#x3E;add_action(&#x27;widgets_init&#x27;, $plugin_shared, &#x27;widgets_init&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;save_post_jobs&#x27;, $plugin_shared, &#x27;flush_widget_cache&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;deleted_post&#x27;, $plugin_shared, &#x27;flush_widget_cache&#x27;);
              $this-&#x3E;loader-&#x3E;add_action(&#x27;switch_theme&#x27;, $plugin_shared, &#x27;flush_widget_cache&#x27;);
            }
          </code>
        </pre>

        <details>
          <p>This operates the same way as the admin and public hooks methods, but refers to our new shared class. From there, the shared class looks just like the admin and public classes, so we don't need to review it.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Review</h1>

        <details>
          <p>This plugin is on github and I'm hoping to keep developing it and make it ready or the WordPress plugin directory. These are basic examples, but I think you'll get a good idea about how to work with the boilerplate.</p>
        </details>
      </article>

      <article class="slide">
        <h1>Links</h1>
        <ul>
          <li>
            <a href="https://github.com/DevinVinson/WordPress-Plugin-Boilerplate/">WordPress Plugin Boilerplate</a>
          </li>
          <li>
            <a href="https://wppb.me">Generator</a>
          </li>
          <li>
            <a href="https://dccmarketing.com">DCC Marketing</a>
          </li>
          <li>
            <a href="https://slushman.com">Slushman</a>
          </li>
          <li>
            <a href="https://github.com/slushman">Slushman GitHub</a>
          </li>
          <li>
            <a href="https://github.com/slushman/now-hiring/">Now Hiring Plugin</a>
          </li>
        </ul>
      </article>

      <footer class="slide">
        <h1>Questions?</h1>
      </footer>
    </section>

    <script src="https://inspirejs.org/inspire.mjs" type="module"></script>
  </body>
</html>
